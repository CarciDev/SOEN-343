import{s as me,e as h,a as S,t as Q,c as b,b as T,l as K,g as N,f as C,d as W,m as o,o as de,i as fe,h as a,v as pe,w as he,k as be,p as _e,q as ve,j as re,r as ge,u as Ee}from"../chunks/scheduler.DdsthWez.js";import{S as ye,i as we,t as $,a as X,c as Ae,b as se,d as ne,m as le,e as oe,f as ie,g as Ce}from"../chunks/index.xAcUk_9z.js";import{p as Le}from"../chunks/stores.BkHKL8Z_.js";import{E as Te,C as xe}from"../chunks/ExclamationCircleIcon.CSk6oXYh.js";import{p as De,i as Ie,a as Pe}from"../chunks/entry.X8yMTra0.js";import{f as ce}from"../chunks/index.B2vNnDbs.js";function Me(e){const t=JSON.parse(e);return t.data&&(t.data=De(t.data)),t}function Z(e){return HTMLElement.prototype.cloneNode.call(e)}function ke(e,t=()=>{}){const s=async({action:i,result:c,reset:r=!0,invalidateAll:f=!0})=>{c.type==="success"&&(r&&HTMLFormElement.prototype.reset.call(e),f&&await Ie()),(location.origin+location.pathname===i.origin+i.pathname||c.type==="redirect"||c.type==="error")&&Pe(c)};async function d(i){var x,y,D,I,L;if(((x=i.submitter)!=null&&x.hasAttribute("formmethod")?i.submitter.formMethod:Z(e).method)!=="post")return;i.preventDefault();const r=new URL((y=i.submitter)!=null&&y.hasAttribute("formaction")?i.submitter.formAction:Z(e).action),f=(D=i.submitter)!=null&&D.hasAttribute("formenctype")?i.submitter.formEnctype:Z(e).enctype,l=new FormData(e),w=(I=i.submitter)==null?void 0:I.getAttribute("name");w&&l.append(w,((L=i.submitter)==null?void 0:L.getAttribute("value"))??"");const A=new AbortController;let u=!1;const _=await t({action:r,cancel:()=>u=!0,controller:A,formData:l,formElement:e,submitter:i.submitter})??s;if(u)return;let v;try{const m=new Headers({accept:"application/json","x-sveltekit-action":"true"});f!=="multipart/form-data"&&m.set("Content-Type",/^(:?application\/x-www-form-urlencoded|text\/plain)$/.test(f)?f:"application/x-www-form-urlencoded");const j=f==="multipart/form-data"?l:new URLSearchParams(l),q=await fetch(r,{method:"POST",headers:m,cache:"no-store",body:j,signal:A.signal});v=Me(await q.text()),v.type==="error"&&(v.status=q.status)}catch(m){if((m==null?void 0:m.name)==="AbortError")return;v={type:"error",error:m}}_({action:r,formData:l,formElement:e,update:m=>s({action:r,result:v,reset:m==null?void 0:m.reset,invalidateAll:m==null?void 0:m.invalidateAll}),result:v})}return HTMLFormElement.prototype.addEventListener.call(e,"submit",d),{destroy(){HTMLFormElement.prototype.removeEventListener.call(e,"submit",d)}}}function ue(e){var j,q;let t,s,d,i,c,r,f=((j=e[0])==null?void 0:j.error)+"",l,w,A,u=((q=e[0])==null?void 0:q.errorMessage)+"",O,_,v,x,y,D,I,L,m;return d=new Te({props:{constColor:!0,height:"h-12",width:"w-12"}}),y=new xe({props:{invertColor:!0}}),{c(){t=h("aside"),s=h("div"),se(d.$$.fragment),i=S(),c=h("div"),r=h("h3"),l=Q(f),w=S(),A=h("p"),O=Q(u),_=S(),v=h("div"),x=h("button"),se(y.$$.fragment),this.h()},l(n){t=b(n,"ASIDE",{style:!0,class:!0});var g=T(t);s=b(g,"DIV",{});var F=T(s);ne(d.$$.fragment,F),F.forEach(C),i=N(g),c=b(g,"DIV",{class:!0});var P=T(c);r=b(P,"H3",{class:!0});var M=T(r);l=W(M,f),M.forEach(C),w=N(P),A=b(P,"P",{});var B=T(A);O=W(B,u),B.forEach(C),P.forEach(C),_=N(g),v=b(g,"DIV",{class:!0});var U=T(v);x=b(U,"BUTTON",{class:!0});var H=T(x);ne(y.$$.fragment,H),H.forEach(C),U.forEach(C),g.forEach(C),this.h()},h(){o(r,"class","h3 font-bold"),o(c,"class","alert-message"),o(x,"class","variant-filled btn-icon"),o(v,"class","alert-actions"),de(t,"min-width","32em"),o(t,"class","alert variant-filled-error max-w-lg self-center")},m(n,g){fe(n,t,g),a(t,s),le(d,s,null),a(t,i),a(t,c),a(c,r),a(r,l),a(c,w),a(c,A),a(A,O),a(t,_),a(t,v),a(v,x),le(y,x,null),I=!0,L||(m=ve(x,"click",e[5]),L=!0)},p(n,g){var F,P;(!I||g&1)&&f!==(f=((F=n[0])==null?void 0:F.error)+"")&&re(l,f),(!I||g&1)&&u!==(u=((P=n[0])==null?void 0:P.errorMessage)+"")&&re(O,u)},i(n){I||($(d.$$.fragment,n),$(y.$$.fragment,n),n&&ge(()=>{I&&(D||(D=oe(t,ce,{duration:200},!0)),D.run(1))}),I=!0)},o(n){X(d.$$.fragment,n),X(y.$$.fragment,n),n&&(D||(D=oe(t,ce,{duration:200},!1)),D.run(0)),I=!1},d(n){n&&C(t),ie(d),ie(y),n&&D&&D.end(),L=!1,m()}}}function He(e){let t,s,d,i='<h1 class="text-4xl">Log In</h1>',c,r,f,l,w,A,u="Email",O,_,v,x,y,D='<span>Password</span> <input class="input" title="Password" name="password" type="password" required=""/>',I,L,m,j,q,n,g,F="Don't have an account?",P,M,B,U,H,Y,ee,p=e[3]&&ue(e);return{c(){t=h("div"),s=h("div"),d=h("header"),d.innerHTML=i,c=S(),r=h("section"),p&&p.c(),f=S(),l=h("form"),w=h("label"),A=h("span"),A.textContent=u,O=S(),_=h("input"),x=S(),y=h("label"),y.innerHTML=D,I=S(),L=h("button"),m=Q("Log in"),q=S(),n=h("div"),g=h("p"),g.textContent=F,P=S(),M=h("a"),B=Q("Create Account"),this.h()},l(E){t=b(E,"DIV",{class:!0});var k=T(t);s=b(k,"DIV",{style:!0,class:!0});var V=T(s);d=b(V,"HEADER",{class:!0,"data-svelte-h":!0}),K(d)!=="svelte-eqhw8d"&&(d.innerHTML=i),c=N(V),r=b(V,"SECTION",{class:!0});var z=T(r);p&&p.l(z),f=N(z),l=b(z,"FORM",{method:!0,class:!0});var R=T(l);w=b(R,"LABEL",{class:!0});var J=T(w);A=b(J,"SPAN",{"data-svelte-h":!0}),K(A)!=="svelte-1bg9cgq"&&(A.textContent=u),O=N(J),_=b(J,"INPUT",{class:!0,title:!0,name:!0,type:!0,placeholder:!0}),J.forEach(C),x=N(R),y=b(R,"LABEL",{class:!0,"data-svelte-h":!0}),K(y)!=="svelte-d8oon9"&&(y.innerHTML=D),I=N(R),L=b(R,"BUTTON",{class:!0,type:!0});var te=T(L);m=W(te,"Log in"),te.forEach(C),R.forEach(C),z.forEach(C),q=N(V),n=b(V,"DIV",{class:!0});var G=T(n);g=b(G,"P",{class:!0,"data-svelte-h":!0}),K(g)!=="svelte-t9dd4j"&&(g.textContent=F),P=N(G),M=b(G,"A",{class:!0,href:!0});var ae=T(M);B=W(ae,"Create Account"),ae.forEach(C),G.forEach(C),V.forEach(C),k.forEach(C),this.h()},h(){var E;o(d,"class","text4xl card-header flex justify-center font-bold"),o(_,"class","input"),o(_,"title","Email address"),o(_,"name","email"),o(_,"type","email"),_.value=v=((E=e[0])==null?void 0:E.email)??"",o(_,"placeholder","example@domain.com"),_.required=!0,o(w,"class","label"),o(y,"class","label"),o(L,"class","variant-filled-primary btn mt-4"),o(L,"type","submit"),L.disabled=e[2],o(l,"method","POST"),o(l,"class","flex flex-col gap-3"),o(r,"class","flex flex-col gap-3 p-4"),o(g,"class","font-bold"),o(M,"class","variant-filled-secondary btn"),o(M,"href",U="/auth/register"+(e[4].url.searchParams.get("destination")?"?destination="+e[4].url.searchParams.get("destination"):"")),o(n,"class","card-footer mt-2 flex items-center justify-around"),de(s,"min-width","36em"),o(s,"class","card min-w-fit flex-grow"),o(t,"class","flex flex-col items-center justify-center gap-4")},m(E,k){fe(E,t,k),a(t,s),a(s,d),a(s,c),a(s,r),p&&p.m(r,null),a(r,f),a(r,l),a(l,w),a(w,A),a(w,O),a(w,_),e[6](_),a(l,x),a(l,y),a(l,I),a(l,L),a(L,m),a(s,q),a(s,n),a(n,g),a(n,P),a(n,M),a(M,B),H=!0,Y||(ee=pe(j=ke.call(null,l,e[7])),Y=!0)},p(E,[k]){var V;E[3]?p?(p.p(E,k),k&8&&$(p,1)):(p=ue(E),p.c(),$(p,1),p.m(r,f)):p&&(Ce(),X(p,1,1,()=>{p=null}),Ae()),(!H||k&1&&v!==(v=((V=E[0])==null?void 0:V.email)??"")&&_.value!==v)&&(_.value=v),(!H||k&4)&&(L.disabled=E[2]),j&&he(j.update)&&k&4&&j.update.call(null,E[7]),(!H||k&16&&U!==(U="/auth/register"+(E[4].url.searchParams.get("destination")?"?destination="+E[4].url.searchParams.get("destination"):"")))&&o(M,"href",U)},i(E){H||($(p),H=!0)},o(E){X(p),H=!1},d(E){E&&C(t),p&&p.d(),e[6](null),Y=!1,ee()}}}function Se(e,t,s){let d,i;be(e,Le,u=>s(4,i=u));let c;_e(()=>{c.focus()});let{form:r}=t,f=!1;const l=u=>{u.preventDefault(),s(3,d=!1)};function w(u){Ee[u?"unshift":"push"](()=>{c=u,s(1,c)})}const A=()=>(s(2,f=!0),async({update:u})=>{await u(),s(2,f=!1)});return e.$$set=u=>{"form"in u&&s(0,r=u.form)},e.$$.update=()=>{e.$$.dirty&1&&s(3,d=(r==null?void 0:r.error)!=null)},[r,c,f,d,i,l,w,A]}class Ue extends ye{constructor(t){super(),we(this,t,Se,He,me,{form:0})}}export{Ue as component};
